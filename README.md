# Healthpay APIS

the api consists of two major steps for (authenticating the merchant itself and the merchant's users/providers)

## Definitions

- `merchant`: typically merchant/merchants are the platforms that consume Healthpay APIS, merchant/merchants should have its own providers and/or users
- `provider`: a single person. he/she is providing a service/product at the merchant's platform he's typically a user with extra permissions.
- `user`: he/she is the platform's enduser which uses his/her wallet to pay for services provided by the merchant's platform.
- `api-header`,`apiKey`,`token`,`userToken`: those are the authentication keys used to authenticate the merchant to healthpay platform, the user/provider to the merchant, the user/provider to healthpay platform _most_ of the tokens generated by healthpay are long lasting JWT tokens. but this can change anytime so make sure to keep your tokens refreshed as much as possible.

## Permissions

a list of all system permissions

### merchant

- create/authenticate both users and providers
- deduct `amount` from authenticated users and/or providers
- add `amount` to authenticated users and/or providers

### users/providers

- view total wallet balance
- view the last 10 logs
- recharge wallet using designated recharging methods

## First step (merchant authentication)

Merchant authentication, you can find your `api-header` and `apiKey` at your healthpay's merchant dashboard. or they will be provided for you directly by healthpay's team. after performing the first steps you should have an API `token` which will later be used in the subsequent API calls

- all merchant requests **SHOULD** have `api-header: <api-header>` header
- all merchant requests **SHOULD** have `Authorization: bearer <token>` header expect for the first api call `mutation authMerchant`

## Second step (user/provider authentication)

After completed the first step successfully you should obtain an API `token` which is in mandatory the upcoming steps.
in this step you will authenticate the user/provider to your merchant to grant your merchant a set of permissions over this provider/user (deduct/add amount),(view/log balance).
